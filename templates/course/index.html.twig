{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}
	- Liste des cours
{% endblock %}

{% block body %}
	<div
		class="relative bg-gradient-to-r from-blue-600 to-indigo-800">
		<!-- Overlay de motif en arrière-plan -->
		<div class="absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]"></div>

		<!-- Entête de la page -->
		<div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
			<div class="text-center md:text-left">
				<h1 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl md:text-5xl">
					<span class="block">Nos cours</span>
					<span class="block text-blue-200">Développez vos compétences</span>
				</h1>
				<p class="mt-4 text-lg text-blue-100 max-w-3xl">
					Explorez notre catalogue de formations et trouvez celle qui correspond à vos objectifs.
				</p>
			</div>
		</div>
	</div>

	<!-- Liste des cours -->
	<div class="bg-white py-12">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="mb-10">
				<h2 class="text-2xl font-bold text-gray-900">Tous les cours disponibles :
					{{ courses|length }}</h2>
				<p class="text-gray-600 mt-2">
					Découvrez notre sélection de formations de qualité
				</p>
			</div>

			<!-- Grille de cours -->
				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"> {% for course in courses %}
					<div
						class="bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow flex flex-col h-full">
						<div class="w-full h-48 bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center">
							<span class="text-white text-lg font-medium">{{ course.name }}</span>
						</div>
						{# {% endif %} #}

						<div class="p-5 flex flex-col flex-grow">
							<div
								class="flex-grow">
								{# Display category name like a tag on the right corner #}
								<span class="text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full">Category : {{ course.category.name }}</span>
								<h3 class="font-bold text-lg text-gray-900 mb-2">{{ course.name }}</h3>
								<p class="text-gray-600 text-sm mb-4">{{ course.content|slice(0, 40) }}
									{% if course.content|length > 40 %}...{% endif %}
								</p>
							</div>

							<!-- Informations du cours - Déplacée en bas de la carte, juste avant les boutons -->
							<div class="mt-auto mb-3 pt-2 border-t border-gray-100 flex justify-between items-center">
								<span class="text-blue-600 font-medium">{{ course.duration }}
									heures</span>
								<span class="text-blue-500 font-medium">
									Formateurs :
								        {{ course.trainer | length }}
                                        <ul>
                                        {% for trainer in course.trainer %}
                                            <li>{{trainer.firstname}}</li>
                                        {% endfor %}
                                        </ul>
								</span>
							</div>

							<!-- Boutons d'action -->
							<div class="pt-2 border-t border-gray-100">
								<div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
									<a href="{{ path('app_course_show', {'id': course.id}) }}" class="px-4 py-2 bg-blue-600 text-white text-center rounded-md hover:bg-blue-700 transition-colors">
										Voir détails
									</a>
								</div>
							</div>
						</div>
					</div>
				{% else %}
					<div class="col-span-full text-center py-12">
						<p class="text-gray-500 text-lg">Aucun cours disponible pour le moment.</p>
					</div>
				{% endfor %}
			</div>

			<!-- Pagination -->
			{% if total_pages > 1 %}
				<div class="mt-8 flex justify-center space-x-2">
					{% if current_page > 1 %}
						<a href="{{ path('app_course_index', {page: current_page - 1}) }}" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
							Précédent
						</a>
					{% endif %}

					{% for i in 1..total_pages %}
						<a href="{{ path('app_course_index', {page: i}) }}" class="px-4 py-2 {% if i == current_page %}bg-blue-800{% else %}bg-blue-600{% endif %} text-white rounded-md hover:bg-blue-700">
							{{ i }}
						</a>
					{% endfor %}

					{% if current_page < total_pages %}
						<a href="{{ path('app_course_index', {page: current_page + 1}) }}" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
							Suivant
						</a>
					{% endif %}
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}

